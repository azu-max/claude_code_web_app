# SnapShare - 要件定義書

## 📌 プロジェクト概要

**プロジェクト名**: SnapShare

**概要**: ファイル共有とギャラリー機能を持つWebアプリケーション。画像やドキュメントをAWS S3にアップロードし、共有リンクを生成できる。QRコード経由でのスマートフォンからのアップロードにも対応。

**作成日**: 2025-11-16

---

## 🎯 プロジェクトの目的

1. AWS S3を活用したファイル管理システムの構築
2. Next.js + TypeScriptでのモダンなWebアプリケーション開発の学習
3. セキュアなファイル共有機能の実装
4. QRコードを活用したクロスデバイス連携の実現

---

## 📱 主要機能

### フェーズ1（MVP: Minimum Viable Product）

#### 1. Basic認証機能
- **説明**: アプリケーション全体へのアクセス制御
- **要件**:
  - ユーザー名/パスワードによる認証
  - 環境変数で認証情報を管理
  - Next.js Middlewareでの実装
- **優先度**: 高

#### 2. ファイルアップロード機能
- **説明**: ブラウザから画像ファイルをS3にアップロード
- **要件**:
  - 対応形式: JPEG, PNG, GIF, WebP
  - ファイルサイズ制限: 10MB
  - ドラッグ&ドロップ対応
  - プログレスバー表示
  - アップロード完了通知
- **優先度**: 高

#### 3. ギャラリー表示機能
- **説明**: アップロード済みファイルの一覧表示
- **要件**:
  - レスポンシブグリッドレイアウト
  - サムネイル表示
  - ファイル名表示
  - アップロード日時表示
  - ファイルサイズ表示
  - 新しい順にソート
- **優先度**: 高

#### 4. ファイルプレビュー機能
- **説明**: 画像の詳細表示
- **要件**:
  - モーダルでの拡大表示
  - 前後の画像への移動
  - ファイル情報の表示
  - モーダルの外側クリックで閉じる
- **優先度**: 中

#### 5. 共有リンク生成機能
- **説明**: ファイルごとに署名付きURLを生成
- **要件**:
  - AWS S3署名付きURL（Pre-signed URL）の生成
  - 有効期限: 7日間
  - リンクのコピー機能
  - コピー完了通知
- **優先度**: 高

---

### フェーズ2（拡張機能）

#### 6. QRコード経由アップロード機能
- **説明**: PCでQRコードを表示し、スマホからアップロード
- **要件**:
  - セッションIDの生成
  - QRコード表示
  - スマホからのアップロード
  - リアルタイム反映（WebSocket or ポーリング）
- **優先度**: 中

#### 7. PDFファイル対応
- **説明**: PDFファイルのアップロードとプレビュー
- **要件**:
  - PDF形式のサポート
  - PDFビューアー
- **優先度**: 低

#### 8. Lambda画像自動処理
- **説明**: S3へのアップロードをトリガーにした自動処理
- **要件**:
  - サムネイル自動生成
  - 画像の最適化
  - メタデータの抽出
- **優先度**: 低

#### 9. ファイル削除機能
- **説明**: アップロードしたファイルの削除
- **要件**:
  - 削除確認ダイアログ
  - S3からの完全削除
  - ギャラリーからの即時反映
- **優先度**: 中

#### 10. タグ・カテゴリ機能
- **説明**: ファイルの分類・検索
- **要件**:
  - タグの追加/削除
  - タグでのフィルタリング
  - カテゴリ別表示
- **優先度**: 低

---

## 🔧 非機能要件

### パフォーマンス
- 画像読み込み: 3秒以内
- ファイルアップロード: 10MBを30秒以内
- ギャラリー表示: 100枚まで2秒以内

### セキュリティ
- AWS認証情報は環境変数で管理（`.env.local`）
- `.env.local`は`.gitignore`に追加
- Basic認証による全体アクセス制御
- 署名付きURLによる期限付きアクセス
- ファイルアップロードのバリデーション（MIME type, サイズ）

### ユーザビリティ
- レスポンシブデザイン（Mobile-first）
- 直感的なUI/UX
- エラーメッセージの明確な表示
- ローディング状態の可視化

### ブラウザ対応
- Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）
- モバイルブラウザ（iOS Safari, Chrome for Android）

### 可用性
- Vercelでのホスティング（99.9%稼働率）
- S3の高可用性（99.99%）

---

## 🛠 技術スタック

### フロントエンド
- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **UIコンポーネント**: Headless UI（オプション）
- **アイコン**: Heroicons or Lucide React

### バックエンド
- **API**: Next.js API Routes
- **認証**: Basic認証（Next.js Middleware）

### インフラ
- **ストレージ**: AWS S3
- **デプロイ**: Vercel
- **将来**: AWS Lambda（画像処理）

### 開発ツール
- **パッケージマネージャー**: npm or yarn or pnpm
- **リンター**: ESLint
- **フォーマッター**: Prettier
- **バージョン管理**: Git / GitHub

### AWS SDK
- **ライブラリ**: `@aws-sdk/client-s3`
- **署名付きURL**: `@aws-sdk/s3-request-presigner`

---

## 📊 想定ユーザー

### ターゲットユーザー
- 個人ユーザー（写真の保存・共有）
- 小規模チーム（ファイル共有）
- 学習目的（AWS/Next.js学習者）

### ユースケース
1. **スマホ写真の簡単共有**
   - QRコードでスマホからアップロード
   - 共有リンクを友人に送信

2. **イベント写真の収集**
   - 複数人がQRコード経由でアップロード
   - ギャラリーでまとめて閲覧

3. **一時的なファイル共有**
   - 期限付きリンクで安全に共有
   - 7日後に自動無効化

---

## 🚫 スコープ外（やらないこと）

フェーズ1では以下を対象外とします：

- ユーザーアカウント管理（会員登録・ログイン）
- ファイルの編集機能
- コメント・いいね機能
- 動画ファイルのサポート
- ファイルの暗号化
- 支払い機能

---

## 📅 開発スケジュール（暫定）

### フェーズ1（MVP）
- **設計・ドキュメント作成**: 1日
- **環境構築**: 0.5日
- **Basic認証実装**: 0.5日
- **ファイルアップロード機能**: 1日
- **ギャラリー表示機能**: 1日
- **プレビュー・共有機能**: 1日
- **テスト・デバッグ**: 1日
- **デプロイ**: 0.5日

**合計**: 約6-7日

### フェーズ2（拡張機能）
- TBD（フェーズ1完了後に計画）

---

## ✅ 成功基準

フェーズ1の完了条件：

1. ✅ Basic認証でアプリにアクセスできる
2. ✅ 画像ファイル（10MB以下）をアップロードできる
3. ✅ アップロードした画像がギャラリーに表示される
4. ✅ 画像をクリックしてモーダルでプレビューできる
5. ✅ 共有リンクを生成し、コピーできる
6. ✅ 共有リンクから画像にアクセスできる（7日間有効）
7. ✅ モバイルブラウザで正常に動作する
8. ✅ Vercelにデプロイして公開できる

---

## 📝 備考

- 本プロジェクトはAWSとNext.jsの学習を目的としています
- フェーズ1完了後、フィードバックを元にフェーズ2の優先順位を再検討します
- セキュリティとパフォーマンスを重視した実装を心がけます
