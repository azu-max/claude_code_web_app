# SnapShare - ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸

## ğŸ“Œ æ¦‚è¦

SnapShareã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã€APIè¨­è¨ˆã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆã‚’å®šç¾©ã—ã¾ã™ã€‚

---

## ğŸ— ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ¦ãƒ¼ã‚¶ãƒ¼                          â”‚
â”‚                    (Browser / Mobile)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPS
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Vercel (CDN)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Next.js 14 Application                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚  Frontend (RSC) â”‚  â”‚  API Routes      â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  - React 18     â”‚  â”‚  - /api/upload   â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  - Tailwind CSS â”‚  â”‚  - /api/files    â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  - TypeScript   â”‚  â”‚  - /api/share    â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚       Middleware (Basic Auth)           â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ AWS SDK
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AWS S3                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        snapshare-uploads-production               â”‚  â”‚
â”‚  â”‚  - uploads/YYYY/MM/DD/[UUID].ext                  â”‚  â”‚
â”‚  â”‚  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ (ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ•ã‚¡ã‚¤ãƒ«åç­‰)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€ãƒ•ã‚§ãƒ¼ã‚º2ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AWS Lambda                           â”‚
â”‚  - S3ãƒˆãƒªã‚¬ãƒ¼ã§ç”»åƒå‡¦ç†                                  â”‚
â”‚  - ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ                                        â”‚
â”‚  - ç”»åƒæœ€é©åŒ–                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | ç”¨é€” |
|---------|------|------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | Next.js 14 (App Router) | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° |
| | React 18 | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| | TypeScript | å‹å®‰å…¨æ€§ |
| | Tailwind CSS | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| | Heroicons / Lucide React | ã‚¢ã‚¤ã‚³ãƒ³ |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | Next.js API Routes | RESTful API |
| | AWS SDK v3 | S3æ“ä½œ |
| **èªè¨¼** | Next.js Middleware | Basicèªè¨¼ |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸** | AWS S3 | ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ |
| **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°** | Vercel | ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»CDN |
| **é–‹ç™ºãƒ„ãƒ¼ãƒ«** | ESLint | ã‚³ãƒ¼ãƒ‰å“è³ª |
| | Prettier | ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ |
| | TypeScript | å‹ãƒã‚§ãƒƒã‚¯ |

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
snapshare/
â”œâ”€â”€ .env.local                    # ç’°å¢ƒå¤‰æ•°ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ï¼‰
â”œâ”€â”€ .env.example                  # ç’°å¢ƒå¤‰æ•°ã®ã‚µãƒ³ãƒ—ãƒ«
â”œâ”€â”€ .gitignore
â”œâ”€â”€ next.config.js                # Next.jsè¨­å®š
â”œâ”€â”€ tailwind.config.ts            # Tailwind CSSè¨­å®š
â”œâ”€â”€ tsconfig.json                 # TypeScriptè¨­å®š
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â”‚
â”œâ”€â”€ docs/                         # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ requirements.md           # è¦ä»¶å®šç¾©æ›¸
â”‚   â”œâ”€â”€ data-structure.md         # ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®šç¾©
â”‚   â”œâ”€â”€ sequence-diagrams.md      # ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³
â”‚   â”œâ”€â”€ system-design.md          # ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸ï¼ˆæœ¬ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â”œâ”€â”€ coding-standards.md       # ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
â”‚   â””â”€â”€ design-guide.md           # ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx            # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ globals.css           # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                  # API Routes
â”‚   â”‚   â”‚   â”œâ”€â”€ upload/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts      # POST /api/upload
â”‚   â”‚   â”‚   â”œâ”€â”€ files/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts      # GET /api/files
â”‚   â”‚   â”‚   â””â”€â”€ share/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts      # POST /api/share
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ qr/                   # ãƒ•ã‚§ãƒ¼ã‚º2: QRæ©Ÿèƒ½
â”‚   â”‚       â””â”€â”€ upload/
â”‚   â”‚           â””â”€â”€ page.tsx      # QRçµŒç”±ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸
â”‚   â”‚
â”‚   â”œâ”€â”€ components/               # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ui/                   # æ±ç”¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Toast.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Spinner.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ features/             # æ©Ÿèƒ½åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ upload/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FileUploader.tsx       # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UI
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DropZone.tsx           # ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProgressBar.tsx        # ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ gallery/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Gallery.tsx            # ã‚®ãƒ£ãƒ©ãƒªãƒ¼å…¨ä½“
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GalleryGrid.tsx        # ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ImageCard.tsx          # ç”»åƒã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ImagePreview.tsx       # ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ share/
â”‚   â”‚   â”‚       â””â”€â”€ ShareButton.tsx        # å…±æœ‰ãƒœã‚¿ãƒ³
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ layouts/              # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚       â””â”€â”€ Footer.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                      # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ aws/
â”‚   â”‚   â”‚   â”œâ”€â”€ s3-client.ts              # S3ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.ts                 # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ list-files.ts             # ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—
â”‚   â”‚   â”‚   â””â”€â”€ generate-presigned-url.ts # ç½²åä»˜ãURLç”Ÿæˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ validators/
â”‚   â”‚   â”‚   â””â”€â”€ file-validator.ts         # ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ date-formatter.ts         # æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚   â”‚       â”œâ”€â”€ file-size-formatter.ts    # ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤º
â”‚   â”‚       â””â”€â”€ uuid-generator.ts         # UUIDç”Ÿæˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                    # å‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ file.ts               # FileItem, FileMetadataç­‰
â”‚   â”‚   â”œâ”€â”€ api.ts                # APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹
â”‚   â”‚   â””â”€â”€ env.d.ts              # ç’°å¢ƒå¤‰æ•°ã®å‹å®šç¾©
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                    # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ useFileUpload.ts      # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ useGallery.ts         # ã‚®ãƒ£ãƒ©ãƒªãƒ¼çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â””â”€â”€ useClipboard.ts       # ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼
â”‚   â”‚
â”‚   â”œâ”€â”€ constants/                # å®šæ•°
â”‚   â”‚   â””â”€â”€ index.ts              # ã‚¢ãƒ—ãƒªå…¨ä½“ã®å®šæ•°
â”‚   â”‚
â”‚   â””â”€â”€ middleware.ts             # Next.js Middleware (Basicèªè¨¼)
â”‚
â”œâ”€â”€ public/                       # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ placeholder.png       # ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ç”»åƒ
â”‚
â””â”€â”€ tests/                        # ãƒ†ã‚¹ãƒˆ (å°†æ¥)
    â”œâ”€â”€ unit/
    â””â”€â”€ integration/
```

---

## ğŸ”Œ APIè¨­è¨ˆ

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | èª¬æ˜ | èªè¨¼ |
|---------|------|------|------|
| POST | `/api/upload` | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | Basic |
| GET | `/api/files` | ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾— | Basic |
| POST | `/api/share` | å…±æœ‰ãƒªãƒ³ã‚¯ç”Ÿæˆ | Basic |
| POST | `/api/qr/session/create` | QRã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ (ãƒ•ã‚§ãƒ¼ã‚º2) | Basic |
| GET | `/api/qr/session/[id]/status` | QRã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹å–å¾— (ãƒ•ã‚§ãƒ¼ã‚º2) | Basic |
| POST | `/api/qr/upload` | QRçµŒç”±ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (ãƒ•ã‚§ãƒ¼ã‚º2) | ãªã— |
| DELETE | `/api/files/[id]` | ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ (ãƒ•ã‚§ãƒ¼ã‚º2) | Basic |

---

### 1. POST /api/upload

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’S3ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```typescript
Content-Type: multipart/form-data

{
  file: File  // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (æˆåŠŸ):**
```json
{
  "success": true,
  "message": "ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ",
  "data": {
    "fileId": "uploads/2025/11/16/550e8400-e29b-41d4-a716-446655440000.jpg",
    "fileName": "vacation.jpg",
    "fileSize": 2048576,
    "uploadedAt": "2025-11-16T10:30:00.000Z"
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (å¤±æ•—):**
```json
{
  "success": false,
  "error": "ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯10MBä»¥ä¸‹ã«ã—ã¦ãã ã•ã„"
}
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:**
- `200`: æˆåŠŸ
- `400`: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
- `500`: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

### 2. GET /api/files

ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```
GET /api/files
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (æˆåŠŸ):**
```json
{
  "success": true,
  "data": {
    "files": [
      {
        "id": "uploads/2025/11/16/550e8400-e29b-41d4-a716-446655440000.jpg",
        "fileName": "vacation.jpg",
        "fileSize": 2048576,
        "mimeType": "image/jpeg",
        "uploadedAt": "2025-11-16T10:30:00.000Z",
        "previewUrl": "https://s3.amazonaws.com/...?X-Amz-Signature=...",
        "s3Key": "uploads/2025/11/16/550e8400-e29b-41d4-a716-446655440000.jpg"
      }
    ],
    "totalCount": 1,
    "hasMore": false
  }
}
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:**
- `200`: æˆåŠŸ
- `500`: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

### 3. POST /api/share

ãƒ•ã‚¡ã‚¤ãƒ«ã®å…±æœ‰ãƒªãƒ³ã‚¯ï¼ˆç½²åä»˜ãURLï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "fileId": "uploads/2025/11/16/550e8400-e29b-41d4-a716-446655440000.jpg",
  "expiresIn": 604800  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³: æœ‰åŠ¹æœŸé™ï¼ˆç§’ï¼‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ7æ—¥
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (æˆåŠŸ):**
```json
{
  "success": true,
  "data": {
    "shareUrl": "https://s3.amazonaws.com/...?X-Amz-Signature=...",
    "expiresAt": "2025-11-23T10:30:00.000Z"
  }
}
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰:**
- `200`: æˆåŠŸ
- `404`: ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„
- `500`: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

## ğŸ§© ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤

```
App (layout.tsx)
â””â”€â”€ Page (page.tsx)
    â”œâ”€â”€ Header
    â”‚   â””â”€â”€ Logo
    â”œâ”€â”€ FileUploader
    â”‚   â”œâ”€â”€ DropZone
    â”‚   â””â”€â”€ ProgressBar
    â”œâ”€â”€ Gallery
    â”‚   â”œâ”€â”€ GalleryGrid
    â”‚   â”‚   â””â”€â”€ ImageCard (è¤‡æ•°)
    â”‚   â”‚       â””â”€â”€ ShareButton
    â”‚   â””â”€â”€ ImagePreview (Modal)
    â””â”€â”€ Footer
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜

#### 1. FileUploader

**è²¬å‹™**: ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’æä¾›

**Props:**
```typescript
interface FileUploaderProps {
  onUploadSuccess: (file: FileItem) => void;
  onUploadError: (error: string) => void;
}
```

**çŠ¶æ…‹:**
```typescript
const [file, setFile] = useState<File | null>(null);
const [isUploading, setIsUploading] = useState(false);
const [progress, setProgress] = useState(0);
```

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
- `handleFileSelect(file: File)`: ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠå‡¦ç†
- `handleUpload()`: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè¡Œ
- `validateFile(file: File)`: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

---

#### 2. Gallery

**è²¬å‹™**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§è¡¨ç¤º

**Props:**
```typescript
interface GalleryProps {
  files: FileItem[];
  isLoading: boolean;
  onRefresh: () => void;
}
```

**çŠ¶æ…‹:**
```typescript
const [selectedImage, setSelectedImage] = useState<FileItem | null>(null);
const [isPreviewOpen, setIsPreviewOpen] = useState(false);
```

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
- `openPreview(file: FileItem)`: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
- `closePreview()`: ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹

---

#### 3. ImageCard

**è²¬å‹™**: å€‹ã€…ã®ç”»åƒã®ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º

**Props:**
```typescript
interface ImageCardProps {
  file: FileItem;
  onClick: () => void;
}
```

**è¡¨ç¤ºå†…å®¹:**
- ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒ
- ãƒ•ã‚¡ã‚¤ãƒ«å
- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º
- å…±æœ‰ãƒœã‚¿ãƒ³

---

#### 4. ShareButton

**è²¬å‹™**: å…±æœ‰ãƒªãƒ³ã‚¯ã®ç”Ÿæˆã¨ã‚³ãƒ”ãƒ¼

**Props:**
```typescript
interface ShareButtonProps {
  fileId: string;
}
```

**çŠ¶æ…‹:**
```typescript
const [isGenerating, setIsGenerating] = useState(false);
const [isCopied, setIsCopied] = useState(false);
```

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
- `generateShareLink()`: å…±æœ‰ãƒªãƒ³ã‚¯ç”ŸæˆAPIå‘¼ã³å‡ºã—
- `copyToClipboard(url: string)`: ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 1. Basicèªè¨¼ (Middleware)

**å®Ÿè£…å ´æ‰€**: `src/middleware.ts`

```typescript
import { NextRequest, NextResponse } from 'next/server';

export function middleware(request: NextRequest) {
  const basicAuth = request.headers.get('authorization');

  if (basicAuth) {
    const authValue = basicAuth.split(' ')[1];
    const [user, password] = atob(authValue).split(':');

    if (
      user === process.env.BASIC_AUTH_USER &&
      password === process.env.BASIC_AUTH_PASSWORD
    ) {
      return NextResponse.next();
    }
  }

  return new NextResponse('Authentication required', {
    status: 401,
    headers: {
      'WWW-Authenticate': 'Basic realm="Secure Area"',
    },
  });
}

export const config = {
  matcher: ['/((?!_next/static|_next/image|favicon.ico).*)'],
};
```

### 2. ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

**æ¤œè¨¼é …ç›®:**
1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 10MBä»¥ä¸‹
2. MIMEã‚¿ã‚¤ãƒ—: `image/jpeg`, `image/png`, `image/gif`, `image/webp`
3. ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­: MIME typeã¨ä¸€è‡´
4. ãƒ•ã‚¡ã‚¤ãƒ«å: ç‰¹æ®Šæ–‡å­—ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º

### 3. S3ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼

**æ¨å¥¨è¨­å®š:**
- ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹: ãƒ–ãƒ­ãƒƒã‚¯
- ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•: ç½²åä»˜ãURLã®ã¿
- ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°: æœ‰åŠ¹ï¼ˆå‰Šé™¤å¯¾ç­–ï¼‰
- ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«: å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•å‰Šé™¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### 4. ç’°å¢ƒå¤‰æ•°ã®ç®¡ç†

**ç¦æ­¢äº‹é …:**
- `.env.local`ã‚’Gitã«ã‚³ãƒŸãƒƒãƒˆ
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§AWSèªè¨¼æƒ…å ±ã‚’ä½¿ç”¨

**å®‰å…¨ãªç®¡ç†:**
- Vercelã®ç’°å¢ƒå¤‰æ•°æ©Ÿèƒ½ã‚’ä½¿ç”¨
- `NEXT_PUBLIC_`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯å…¬é–‹æƒ…å ±ã®ã¿

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤è¨­è¨ˆ

### Vercelãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

```
1. GitHubãƒªãƒã‚¸ãƒˆãƒªã«push
   â†“
2. VercelãŒè‡ªå‹•æ¤œçŸ¥
   â†“
3. ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
   - next build
   - TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
   - é™çš„ãƒ•ã‚¡ã‚¤ãƒ«æœ€é©åŒ–
   â†“
4. ç’°å¢ƒå¤‰æ•°ã‚’æ³¨å…¥
   â†“
5. Vercel CDNã«ãƒ‡ãƒ—ãƒ­ã‚¤
   â†“
6. æœ¬ç•ªURLç™ºè¡Œ
```

### ç’°å¢ƒåˆ¥è¨­å®š

| ç’°å¢ƒ | ãƒ–ãƒ©ãƒ³ãƒ | URL | S3ãƒã‚±ãƒƒãƒˆ |
|-----|---------|-----|-----------|
| Production | `main` | snapshare.vercel.app | snapshare-uploads-production |
| Preview | ãã®ä»– | [branch]-snapshare.vercel.app | snapshare-uploads-development |

---

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### æœ€é©åŒ–æ–½ç­–

1. **ç”»åƒæœ€é©åŒ–**
   - Next.js Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨
   - WebPå¤‰æ›
   - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒ

2. **ã‚³ãƒ¼ãƒ‰åˆ†å‰²**
   - Dynamic Import
   - Route-based code splitting

3. **ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°**
   - S3ç½²åä»˜ãURLã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ1æ™‚é–“ï¼‰
   - Vercel Edge Cache

4. **é…å»¶èª­ã¿è¾¼ã¿**
   - Intersection Observer ã§ã‚®ãƒ£ãƒ©ãƒªãƒ¼ç”»åƒã‚’é…å»¶èª­ã¿è¾¼ã¿

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ˆå°†æ¥ï¼‰

### ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«

1. **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**
   - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
   - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
   - ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯

2. **çµ±åˆãƒ†ã‚¹ãƒˆ**
   - API Routes
   - S3é€£æº

3. **E2Eãƒ†ã‚¹ãƒˆ**
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼
   - å…±æœ‰ãƒªãƒ³ã‚¯ç”Ÿæˆãƒ•ãƒ­ãƒ¼

---

## ğŸ“ å‚™è€ƒ

- ãƒ•ã‚§ãƒ¼ã‚º1ã§ã¯æœ€å°é™ã®æ©Ÿèƒ½ã«é›†ä¸­
- æ‹¡å¼µæ€§ã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆï¼ˆãƒ•ã‚§ãƒ¼ã‚º2ã¸ã®ç§»è¡Œã‚’å®¹æ˜“ã«ï¼‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®å®Ÿè£…
